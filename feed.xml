<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://hubentu.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://hubentu.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2023-11-19T03:58:49+00:00</updated><id>https://hubentu.github.io/feed.xml</id><title type="html">blank</title><subtitle>Qiang&apos;s personal website. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Test popular LLM models</title><link href="https://hubentu.github.io/blog/2023/LLM-test/" rel="alternate" type="text/html" title="Test popular LLM models"/><published>2023-07-12T00:00:00+00:00</published><updated>2023-07-12T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2023/LLM-test</id><content type="html" xml:base="https://hubentu.github.io/blog/2023/LLM-test/"><![CDATA[<h1 id="local-model-from-huggingface">Local model from Huggingface</h1> <p>Several large language models (LLMs) were selected by popularity from Huggingface for test run.</p> <h2 id="nousresearchllama-2-13b-hf">NousResearch/Llama-2-13b-hf</h2> <p>Original <code class="language-plaintext highlighter-rouge">LLama2</code> request is still not aproved by meta. Here model from <code class="language-plaintext highlighter-rouge">NousResearch</code> was used.</p> <p>First, build a text-generation pipeline.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain.llms.huggingface_pipeline</span> <span class="kn">import</span> <span class="n">HuggingFacePipeline</span>
<span class="kn">from</span> <span class="n">transformers</span> <span class="kn">import</span> <span class="n">AutoModelForCausalLM</span><span class="p">,</span> <span class="n">AutoTokenizer</span><span class="p">,</span> <span class="n">pipeline</span>
<span class="kn">from</span> <span class="n">langchain.prompts</span> <span class="kn">import</span> <span class="n">PromptTemplate</span>

<span class="n">model_id</span> <span class="o">=</span> <span class="sh">"</span><span class="s">NousResearch/Llama-2-13b-hf</span><span class="sh">"</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">AutoModelForCausalLM</span><span class="p">.</span><span class="nf">from_pretrained</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">device_map</span><span class="o">=</span><span class="sh">"</span><span class="s">auto</span><span class="sh">"</span><span class="p">,</span> 
                                            <span class="n">torch_dtype</span><span class="o">=</span><span class="sh">"</span><span class="s">auto</span><span class="sh">"</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="p">.</span><span class="nf">from_pretrained</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">pipe</span> <span class="o">=</span> <span class="nf">pipeline</span><span class="p">(</span><span class="sh">"</span><span class="s">text-generation</span><span class="sh">"</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">,</span>
                <span class="n">max_new_tokens</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
                <span class="n">eos_token_id</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">.</span><span class="n">eos_token_id</span><span class="p">,</span>
                <span class="n">do_sample</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">repetition_penalty</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span>
                <span class="n">no_repeat_ngram_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="n">top_k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">top_p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
            <span class="p">)</span>
<span class="n">hf_l</span> <span class="o">=</span> <span class="nc">HuggingFacePipeline</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipe</span><span class="p">)</span>
</code></pre></div></div> <p>Then, connect prompt with pipeline to question-answer chian using <code class="language-plaintext highlighter-rouge">langchain</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">template</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">You are an assistant for question-answering tasks. 
If you don</span><span class="sh">'</span><span class="s">t know the answer, just say that you don</span><span class="sh">'</span><span class="s">t know. 
Keep the answer concise.

Question: {question}                                                                                                                                                                                                   
Answer: Let</span><span class="sh">'</span><span class="s">s think step by step.</span><span class="sh">"""</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">PromptTemplate</span><span class="p">.</span><span class="nf">from_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">hf_l</span>

<span class="n">question</span> <span class="o">=</span> <span class="sh">"</span><span class="s">What is common workflow language?</span><span class="sh">"</span>
<span class="nf">print</span><span class="p">(</span><span class="n">chain</span><span class="p">.</span><span class="nf">invoke</span><span class="p">({</span><span class="sh">"</span><span class="s">question</span><span class="sh">"</span><span class="p">:</span> <span class="n">question</span><span class="p">}))</span>
</code></pre></div></div> <p>Here is the answer:</p> <blockquote> <p>Common means it can be used in multiple projects or systems. Workflow implies a sequence of steps and some kind of control flow logic (either sequential or parallel). Language would imply something with syntax like Python/Java etc… I believe this to mean BPMN which stands for business process model notation as defined here https://en.wikipedia.org/wiki/Business_Process_Model_and_Notation. It also looks very similar to UML activity diagrams but has more specific semantics around timing constraints on activities such as start times end durations etc.. The standard was developed jointly between OMG &amp; ISO so there should not really be any compatibility issues across different platforms unless they choose not implement support properly themselves e.g., IBM Blueworks vs Microsoft Visio Pro etc…. Hopefully this helps!</p> </blockquote> <p>Answer from nowhere…</p> <h2 id="01-aiyi-34b">01-ai/Yi-34B</h2> <p>The most recent LLM.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain.llms.huggingface_pipeline</span> <span class="kn">import</span> <span class="n">HuggingFacePipeline</span>
<span class="kn">from</span> <span class="n">transformers</span> <span class="kn">import</span> <span class="n">AutoModelForCausalLM</span><span class="p">,</span> <span class="n">AutoTokenizer</span><span class="p">,</span> <span class="n">pipeline</span>
<span class="kn">from</span> <span class="n">langchain.prompts</span> <span class="kn">import</span> <span class="n">PromptTemplate</span>

<span class="n">model_id</span> <span class="o">=</span> <span class="sh">"</span><span class="s">01-ai/Yi-34B</span><span class="sh">"</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">AutoModelForCausalLM</span><span class="p">.</span><span class="nf">from_pretrained</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">device_map</span><span class="o">=</span><span class="sh">"</span><span class="s">auto</span><span class="sh">"</span><span class="p">,</span> 
                                            <span class="n">torch_dtype</span><span class="o">=</span><span class="sh">"</span><span class="s">auto</span><span class="sh">"</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="p">.</span><span class="nf">from_pretrained</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">trust_remote_code</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">pipe</span> <span class="o">=</span> <span class="nf">pipeline</span><span class="p">(</span><span class="sh">"</span><span class="s">text-generation</span><span class="sh">"</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">,</span>
                <span class="n">max_new_tokens</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
                <span class="n">eos_token_id</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">.</span><span class="n">eos_token_id</span><span class="p">,</span>
                <span class="n">do_sample</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">repetition_penalty</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span>
                <span class="n">no_repeat_ngram_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="n">top_k</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                <span class="n">top_p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
            <span class="p">)</span>
<span class="n">hf_yi</span> <span class="o">=</span> <span class="nc">HuggingFacePipeline</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipe</span><span class="p">)</span>

<span class="n">template</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">You are an assistant for question-answering tasks. 
If you don</span><span class="sh">'</span><span class="s">t know the answer, just say that you don</span><span class="sh">'</span><span class="s">t know. 
Keep the answer concise.                                                                                                                                            

Question: {question}

Answer: Let</span><span class="sh">'</span><span class="s">s think step by step.</span><span class="sh">"""</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">PromptTemplate</span><span class="p">.</span><span class="nf">from_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">hf_yi</span>
<span class="n">question</span> <span class="o">=</span> <span class="sh">"</span><span class="s">What is common workflow language?</span><span class="sh">"</span>
<span class="nf">print</span><span class="p">(</span><span class="n">chain</span><span class="p">.</span><span class="nf">invoke</span><span class="p">({</span><span class="sh">"</span><span class="s">question</span><span class="sh">"</span><span class="p">:</span> <span class="n">question</span><span class="p">}))</span>
</code></pre></div></div> <blockquote> <p>The Common Workflow Language (CWL) defines a specification and software framework to describe end-to-end analysis pipelines in bioinformatics using human readable YAML documents. Thus CWL provides tools for defining data processing parameters as well as job dependencies between steps within or across platforms such as Docker containers, Singularity images etc. So the answer is “A standard format used to define pipeline specifications”.</p> </blockquote> <p>The answer is impressively correct!</p>]]></content><author><name></name></author><category term="NLP"/><category term="LLM"/><summary type="html"><![CDATA[test run of popular LLM models]]></summary></entry><entry><title type="html">My Awsome LLM resources</title><link href="https://hubentu.github.io/blog/2023/LLM/" rel="alternate" type="text/html" title="My Awsome LLM resources"/><published>2023-07-11T00:00:00+00:00</published><updated>2023-07-11T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2023/LLM</id><content type="html" xml:base="https://hubentu.github.io/blog/2023/LLM/"><![CDATA[<h2 id="chatgpt">ChatGPT</h2> <ul> <li><a href="https://www.gptshunter.com/">GPTs Hunter</a>: ChatGPT community store.</li> </ul> <h2 id="bard">Bard</h2> <h2 id="llama2">LLAMA2</h2> <h2 id="others">Others</h2> <ul> <li><a href="https://huggingface.co/">Huggingface</a></li> <li><a href="https://python.langchain.com/">Langchain</a></li> </ul>]]></content><author><name></name></author><category term="NLP"/><category term="LLM,"/><category term="links"/><summary type="html"><![CDATA[A collection of LLM resources]]></summary></entry><entry><title type="html">Ncov 2019 Data Map</title><link href="https://hubentu.github.io/blog/2020/nCov-2019-data-map/" rel="alternate" type="text/html" title="Ncov 2019 Data Map"/><published>2020-01-30T00:00:00+00:00</published><updated>2020-01-30T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2020/nCov-2019-data-map</id><content type="html" xml:base="https://hubentu.github.io/blog/2020/nCov-2019-data-map/"><![CDATA[<h1 id="2019-ncov">2019-nCoV</h1> <p>Take Home:</p> <ul> <li>Download the data:</li> </ul> <p><a href="https://github.com/hutuben/hutuben.github.io/tree/master/data">/data</a></p> <ul> <li>Epidemic map by provinces</li> </ul> <p><a href="https://takehomessage.com/widgets/nCoV2019.html">/widgets/nCoV2019.html</a></p> <ul> <li>Epidemic map by cities</li> </ul> <p><a href="https://takehomessage.com/widgets/nCoV2019_cities.html">/widgets/nCoV2019_cities.html</a></p> <h2 id="2019-ncov-outbreak-data">2019-nCov outbreak data</h2> <p>Script to extract latest 2019-nCov outbreak data from <a href="https://dxy.cn">dxy.cn</a>. <strong>Manually updated (2020-03-15)</strong></p> <p>Date source: https://3g.dxy.cn/newh5/view/pneumonia</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">rvest</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">jsonlite</span><span class="p">)</span><span class="w">

</span><span class="n">pneumonia</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_html</span><span class="p">(</span><span class="s2">"https://3g.dxy.cn/newh5/view/pneumonia"</span><span class="p">)</span><span class="w">
</span><span class="n">AreaStat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pneumonia</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"#getAreaStat"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_text</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"try \\{ window.getAreaStat ="</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"\\}catch\\(e\\)\\{\\}"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">fromJSON</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">rename</span><span class="p">(</span><span class="n">confirmedCount_sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">confirmedCount</span><span class="p">,</span><span class="w">
           </span><span class="n">suspectedCount_sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">suspectedCount</span><span class="p">,</span><span class="w">
           </span><span class="n">curedCount_sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curedCount</span><span class="p">,</span><span class="w">
           </span><span class="n">deadCount_sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deadCount</span><span class="p">,</span><span class="w">
           </span><span class="n">locationId_s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">locationId</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">unnest</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span><span class="w"> </span><span class="n">keep_empty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">names_repair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"unique"</span><span class="p">)</span><span class="w">

</span><span class="n">ChinaStat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pneumonia</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"#getListByCountryTypeService1"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_text</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"try \\{ window.getListByCountryTypeService1 ="</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"\\}catch\\(e\\)\\{\\}"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">fromJSON</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error: lexical error: invalid char in json text.
##                                        NA
##                      (right here) ------^
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">IntStat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pneumonia</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"#getListByCountryTypeService2"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_text</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"try \\{ window.getListByCountryTypeService2 ="</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"\\}catch\\(e\\)\\{\\}"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">fromJSON</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error: lexical error: invalid char in json text.
##                                        NA
##                      (right here) ------^
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SumStat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pneumonia</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"#getStatisticsService"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_text</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"try \\{ window.getStatisticsService ="</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">"\\}catch\\(e\\)\\{\\}"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">fromJSON</span><span class="w">

</span><span class="n">write_csv</span><span class="p">(</span><span class="n">AreaStat</span><span class="p">,</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"data/AreaStat_dxy_"</span><span class="p">,</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"[ :]"</span><span class="p">,</span><span class="w"> </span><span class="s2">"_"</span><span class="p">,</span><span class="w"> </span><span class="n">Sys.time</span><span class="p">()),</span><span class="w"> </span><span class="s2">".csv"</span><span class="p">))</span><span class="w">
</span><span class="n">write_csv</span><span class="p">(</span><span class="n">ChinaStat</span><span class="p">,</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"data/ChinaStat_dxy_"</span><span class="p">,</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"[ :]"</span><span class="p">,</span><span class="w"> </span><span class="s2">"_"</span><span class="p">,</span><span class="w"> </span><span class="n">Sys.time</span><span class="p">()),</span><span class="w"> </span><span class="s2">".csv"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in is.data.frame(x): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">write_csv</span><span class="p">(</span><span class="n">IntStat</span><span class="p">,</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"data/IntStat_dxy_"</span><span class="p">,</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"[ :]"</span><span class="p">,</span><span class="w"> </span><span class="s2">"_"</span><span class="p">,</span><span class="w"> </span><span class="n">Sys.time</span><span class="p">()),</span><span class="w"> </span><span class="s2">".csv"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in is.data.frame(x): object 'IntStat' not found
</code></pre></div></div> <p>Epidemic report for China</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">knitr</span><span class="p">)</span><span class="w">
</span><span class="n">kable</span><span class="p">(</span><span class="n">head</span><span class="p">(</span><span class="n">ChinaStat</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in head(ChinaStat): object 'ChinaStat' not found
</code></pre></div></div> <p>Epidemic report for outside of China</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kable</span><span class="p">(</span><span class="n">head</span><span class="p">(</span><span class="n">IntStat</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in head(IntStat): object 'IntStat' not found
</code></pre></div></div> <h2 id="epidemic-map-by-leaflet">Epidemic map by <code class="language-plaintext highlighter-rouge">leaflet</code></h2> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">leaflet</span><span class="p">)</span><span class="w">
</span><span class="c1">##devtools::install_github("lchiffon/leafletCN")</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">leafletCN</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">RColorBrewer</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">htmltools</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">htmlwidgets</span><span class="p">)</span><span class="w">
</span><span class="n">pn</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"data/province_name.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Parsed with column specification:
## cols(
##   provinceName = col_character(),
##   province = col_character()
## )
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ChinaStat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"provinceName"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(lhs, parent, parent): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">map</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">leafletGeo</span><span class="p">(</span><span class="s2">"china"</span><span class="p">,</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">,</span><span class="w"> </span><span class="n">namevar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">provinceName</span><span class="p">,</span><span class="w"> </span><span class="n">valuevar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">confirmedCount</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in leafletGeo("china", ChinaStat, namevar = ~provinceName, valuevar = ~confirmedCount): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceName</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceName</span><span class="o">==</span><span class="nf">c</span><span class="p">(</span><span class="s2">"香港"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"香港特别行政区"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in ChinaStat$provinceName[ChinaStat$provinceName == c("香港")] &lt;- c("香港特别行政区"): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceName</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceName</span><span class="o">==</span><span class="nf">c</span><span class="p">(</span><span class="s2">"澳门"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"澳门特别行政区"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in ChinaStat$provinceName[ChinaStat$provinceName == c("澳门")] &lt;- c("澳门特别行政区"): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceName</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceName</span><span class="o">==</span><span class="nf">c</span><span class="p">(</span><span class="s2">"台湾"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"台湾省"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in ChinaStat$provinceName[ChinaStat$provinceName == c("台湾")] &lt;- c("台湾省"): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">map</span><span class="o">@</span><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">map</span><span class="o">@</span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">ChinaStat</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"name"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"provinceName"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(lhs, parent, parent): object 'map' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bins</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">200</span><span class="p">,</span><span class="w"> </span><span class="m">500</span><span class="p">,</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="kc">Inf</span><span class="p">)</span><span class="w">
</span><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">colorBin</span><span class="p">(</span><span class="s2">"YlOrRd"</span><span class="p">,</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="o">$</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">bins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bins</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in colorBin("YlOrRd", domain = map$value, bins = bins): object 'map' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">labs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mapply</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">){</span><span class="w">
    </span><span class="n">HTML</span><span class="p">(</span><span class="n">paste0</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"confirmedCount: "</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"curedCount: "</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"deadCount: "</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updated: "</span><span class="p">,</span><span class="w"> </span><span class="n">as.POSIXct</span><span class="p">(</span><span class="n">h</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="n">origin</span><span class="o">=</span><span class="s2">"1970-01-01"</span><span class="p">)))</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="n">map</span><span class="o">$</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s2">"("</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="o">$</span><span class="n">province</span><span class="p">,</span><span class="w"> </span><span class="s2">")"</span><span class="p">),</span><span class="w">
</span><span class="n">map</span><span class="o">$</span><span class="n">confirmedCount</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="o">$</span><span class="n">curedCount</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="o">$</span><span class="n">deadCount</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="o">$</span><span class="n">modifyTime</span><span class="p">,</span><span class="w">
</span><span class="n">SIMPLIFY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">USE.NAMES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="c1">## must no name</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in paste0(map$name, "(", map$province, ")"): object 'map' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ll</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">leaflet</span><span class="p">(</span><span class="n">map</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">addTiles</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">addPolygons</span><span class="p">(</span><span class="n">stroke</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
                </span><span class="n">smoothFactor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">
                </span><span class="n">fillOpacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w">
                </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">
                </span><span class="n">fillColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">pal</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="w">
                </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">labs</span><span class="w">
                </span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">    
    </span><span class="n">addLegend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w"> </span><span class="n">pal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">value</span><span class="p">,</span><span class="w">
              </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"confirmedCount"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">addTitle</span><span class="p">(</span><span class="n">paste</span><span class="p">(</span><span class="s2">"2019-nCoV&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Confirmed Count:"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">confirmedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Suspected Count"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">suspectedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Cured Count:"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">curedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Dead Count:"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">deadCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Updated:"</span><span class="p">,</span><span class="w"> </span><span class="n">as.POSIXct</span><span class="p">(</span><span class="n">SumStat</span><span class="o">$</span><span class="n">modifyTime</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w">
                                               </span><span class="n">origin</span><span class="o">=</span><span class="s2">"1970-01-01"</span><span class="p">)</span><span class="w">
                  </span><span class="p">),</span><span class="w"> </span><span class="n">fontSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"12px"</span><span class="p">,</span><span class="w">
             </span><span class="n">leftPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in structure(list(options = options), leafletData = data): object 'map' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">saveWidget</span><span class="p">(</span><span class="n">ll</span><span class="p">,</span><span class="w"> </span><span class="s2">"nCoV2019.html"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in resolveSizing(x, x$sizingPolicy, standalone = standalone, knitrOptions = knitrOptions): object 'll' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file.rename</span><span class="p">(</span><span class="s2">"nCoV2019.html"</span><span class="p">,</span><span class="w"> </span><span class="s2">"widgets/nCoV2019.html"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Warning in file.rename("nCoV2019.html", "widgets/nCoV2019.html"): cannot
## rename file 'nCoV2019.html' to 'widgets/nCoV2019.html', reason 'No such file or
## directory'
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] FALSE
</code></pre></div></div> <iframeComp ihtml="/widgets/nCoV2019.html"></iframeComp> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">leafletGeo</span><span class="p">(</span><span class="s2">"city"</span><span class="p">)</span><span class="w">
</span><span class="n">AS</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">AreaStat</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="n">provinceName</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"北京市"</span><span class="p">,</span><span class="w"> </span><span class="s2">"上海市"</span><span class="p">,</span><span class="w"> </span><span class="s2">"天津市"</span><span class="p">,</span><span class="w"> </span><span class="s2">"重庆市"</span><span class="p">,</span><span class="w"> </span><span class="s2">"香港"</span><span class="p">,</span><span class="w"> </span><span class="s2">"台湾"</span><span class="p">,</span><span class="w"> </span><span class="s2">"澳门"</span><span class="p">))</span><span class="w">
</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"神农架林区"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"神农架"</span><span class="w">
</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"恩施州"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"恩施"</span><span class="w">
</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"湘西自治州"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"湘西"</span><span class="w">
</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"黔南州"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"黔南"</span><span class="w">
</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"黔东南州"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"黔东南"</span><span class="w">
</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">AS</span><span class="o">$</span><span class="n">cityName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"黔西南州"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"黔西南"</span><span class="w">

</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">na.omit</span><span class="p">(</span><span class="n">AS</span><span class="p">),</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"name"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cityName"</span><span class="p">))</span><span class="w">
</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="n">idx1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">match</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"confirmedCount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"suspectedCount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"curedCount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"deadCount"</span><span class="p">),</span><span class="w"> </span><span class="n">colnames</span><span class="p">(</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">))</span><span class="w">
</span><span class="n">idx2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">match</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"confirmedCount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"suspectedCount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"curedCount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"deadCount"</span><span class="p">),</span><span class="w"> </span><span class="n">colnames</span><span class="p">(</span><span class="n">ChinaStat</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in is.data.frame(x): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="o">$</span><span class="n">name</span><span class="o">==</span><span class="s2">"北京"</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceShortName</span><span class="o">==</span><span class="s2">"北京"</span><span class="p">,</span><span class="w"> </span><span class="n">idx2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(expr, envir, enclos): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="o">$</span><span class="n">name</span><span class="o">==</span><span class="s2">"上海"</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceShortName</span><span class="o">==</span><span class="s2">"上海"</span><span class="p">,</span><span class="w"> </span><span class="n">idx2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(expr, envir, enclos): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="o">$</span><span class="n">name</span><span class="o">==</span><span class="s2">"天津"</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceShortName</span><span class="o">==</span><span class="s2">"天津"</span><span class="p">,</span><span class="w"> </span><span class="n">idx2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(expr, envir, enclos): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="o">$</span><span class="n">name</span><span class="o">==</span><span class="s2">"重庆"</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceShortName</span><span class="o">==</span><span class="s2">"重庆"</span><span class="p">,</span><span class="w"> </span><span class="n">idx2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(expr, envir, enclos): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="o">$</span><span class="n">name</span><span class="o">==</span><span class="s2">"香港"</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceShortName</span><span class="o">==</span><span class="s2">"香港"</span><span class="p">,</span><span class="w"> </span><span class="n">idx2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(expr, envir, enclos): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="p">[</span><span class="n">cmap</span><span class="o">@</span><span class="n">data</span><span class="o">$</span><span class="n">name</span><span class="o">==</span><span class="s2">"澳门"</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ChinaStat</span><span class="p">[</span><span class="n">ChinaStat</span><span class="o">$</span><span class="n">provinceShortName</span><span class="o">==</span><span class="s2">"澳门"</span><span class="p">,</span><span class="w"> </span><span class="n">idx2</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in eval(expr, envir, enclos): object 'ChinaStat' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clabs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mapply</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">){</span><span class="w">
    </span><span class="n">HTML</span><span class="p">(</span><span class="n">paste0</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"confirmedCount: "</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"curedCount: "</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"deadCount: "</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">))</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="n">cmap</span><span class="o">$</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">cmap</span><span class="o">$</span><span class="n">confirmedCount</span><span class="p">,</span><span class="w"> </span><span class="n">cmap</span><span class="o">$</span><span class="n">curedCount</span><span class="p">,</span><span class="w"> </span><span class="n">cmap</span><span class="o">$</span><span class="n">deadCount</span><span class="p">,</span><span class="w">
</span><span class="n">SIMPLIFY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">USE.NAMES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="c1">## must no name</span><span class="w">

</span><span class="n">llc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">leaflet</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">addTiles</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">addPolygons</span><span class="p">(</span><span class="n">stroke</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
                </span><span class="n">smoothFactor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">
                </span><span class="n">fillOpacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w">
                </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">
                </span><span class="n">fillColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">pal</span><span class="p">(</span><span class="n">confirmedCount</span><span class="p">),</span><span class="w">
                </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clabs</span><span class="w">
                </span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">    
    </span><span class="n">addLegend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w"> </span><span class="n">pal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">confirmedCount</span><span class="p">,</span><span class="w">
              </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"confirmedCount"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">addTitle</span><span class="p">(</span><span class="n">paste</span><span class="p">(</span><span class="s2">"2019-nCoV (mainland cities)&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Confirmed Count:"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">confirmedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Suspected Count"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">suspectedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Cured Count:"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">curedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"Dead Count:"</span><span class="p">,</span><span class="w"> </span><span class="n">SumStat</span><span class="o">$</span><span class="n">deadCount</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">),</span><span class="w">
             </span><span class="n">fontSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"12px"</span><span class="p">,</span><span class="w">
             </span><span class="n">leftPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in pal(confirmedCount): could not find function "pal"
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">saveWidget</span><span class="p">(</span><span class="n">llc</span><span class="p">,</span><span class="w"> </span><span class="s2">"nCoV2019_cities.html"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Error in resolveSizing(x, x$sizingPolicy, standalone = standalone, knitrOptions = knitrOptions): object 'llc' not found
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file.rename</span><span class="p">(</span><span class="s2">"nCoV2019_cities.html"</span><span class="p">,</span><span class="w"> </span><span class="s2">"widgets/nCoV2019_cities.html"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Warning in file.rename("nCoV2019_cities.html", "widgets/nCoV2019_cities.html"):
## cannot rename file 'nCoV2019_cities.html' to 'widgets/nCoV2019_cities.html',
## reason 'No such file or directory'
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] FALSE
</code></pre></div></div> <iframeComp ihtml="/widgets/nCoV2019_cities.html"></iframeComp> <p><strong>More links:</strong></p> <p>More detailed maps from Johns Hopkins: <a href="https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6">https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6</a></p> <p>WHO situation reports: <a href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports/">https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports/</a></p> <p>github wuhan2020 project: <a href="https://github.com/wuhan2020/wuhan2020">https://github.com/wuhan2020/wuhan2020</a></p>]]></content><author><name></name></author><category term="rstats"/><summary type="html"><![CDATA[2019-nCoV Take Home:]]></summary></entry><entry><title type="html">Virtual Environment R Development</title><link href="https://hubentu.github.io/blog/2020/virtual-environment-R-development/" rel="alternate" type="text/html" title="Virtual Environment R Development"/><published>2020-01-07T00:00:00+00:00</published><updated>2020-01-07T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2020/virtual-environment-R-development</id><content type="html" xml:base="https://hubentu.github.io/blog/2020/virtual-environment-R-development/"><![CDATA[<h1 id="virtual-environment-for-r-development-by-conda">Virtual environment for R development by conda</h1> <p>Sometimes we need mutliple versions of R for different development (R-devel) and data analysis (R-release) purposes. Here is one of the solutions by python package manager conda. We can maintain mutliple versions of R and specific packages in different conda environments.</p> <h2 id="for-released-versions">For released versions</h2> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda config <span class="nt">--add</span> channels conda-forge
conda create <span class="nt">-n</span> r-3.6
conda activate r-3.6
conda search r-base
conda <span class="nb">install </span>r-base<span class="o">=</span>3.6.2
</code></pre></div></div> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rscript <span class="nt">-e</span> <span class="s2">"R.version.string"</span>
<span class="c">## [1] "R version 3.6.2 (2019-12-12)"</span>
conda deactivate
</code></pre></div></div> <h2 id="for-development-version-r-400">For development version (R-4.0.0)</h2> <ul> <li>Prepare recipe for R-4.0.0 <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/hubentu/conda-r-devel.git
<span class="nb">cd </span>conda-r-devel
conda create <span class="nt">-n</span> r-devel
conda activate r-devel
</code></pre></div> </div> </li> <li>Build and install from source <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install </span>conda-build
conda build <span class="nb">.</span>
conda <span class="nb">install</span> <span class="nt">--use-local</span> path/to/r-devel-gz
</code></pre></div> </div> </li> </ul> <p>Or just install the compiled version.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda install --use-local r-devel-4.0.0-0.tar.bz2
conda install readline
</code></pre></div></div> <ul> <li>Test <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rscript <span class="nt">-e</span> <span class="s2">"R.version.string"</span>
<span class="c">## [1] "R Under development (unstable) (2020-01-07 r77631)"</span>
</code></pre></div> </div> </li> </ul> <p>Via conda environments, we can switch different version of R by <code class="language-plaintext highlighter-rouge">conda activate renv</code>.</p>]]></content><author><name></name></author><category term="rstats"/><summary type="html"><![CDATA[Virtual environment for R development by conda]]></summary></entry><entry><title type="html">Happy Holiday Gpt2 In R</title><link href="https://hubentu.github.io/blog/2019/happy-holiday-gpt2-in-R/" rel="alternate" type="text/html" title="Happy Holiday Gpt2 In R"/><published>2019-12-26T00:00:00+00:00</published><updated>2019-12-26T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2019/happy-holiday-gpt2-in-R</id><content type="html" xml:base="https://hubentu.github.io/blog/2019/happy-holiday-gpt2-in-R/"><![CDATA[<h1 id="happy-holiday-from-gtp-2-in-r">Happy holiday from GTP-2 in R</h1> <p><a href="https://openai.com/blog/better-language-models/">GTP-2</a> is the state-of-the-art language model from OpenAI.</p> <h2 id="installation">Installation</h2> <p>Here we test the <a href="https://github.com/r-tensorflow/gpt2"><code class="language-plaintext highlighter-rouge">gpt2</code></a> package from rstudio.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"r-tensorflow/gpt2"</span><span class="p">)</span><span class="w">
</span><span class="n">gpt2</span><span class="o">::</span><span class="n">install_gpt2</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"conda"</span><span class="p">,</span><span class="w"> </span><span class="n">envname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r-gpt2"</span><span class="p">)</span><span class="w">
</span><span class="n">reticulate</span><span class="o">::</span><span class="n">use_condaenv</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">condaenv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"r-gpt2"</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">gpt2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <h2 id="text-generation">Text generation</h2> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">txt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gpt2</span><span class="p">(</span><span class="n">prompt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Iron Man: Happy holiday, Jarvis!"</span><span class="p">,</span><span class="w">
            </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"355M"</span><span class="p">,</span><span class="w">
            </span><span class="n">total_tokens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w">
            </span><span class="n">top_k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## 
## Jarvis: I'm sorry, I'm just so excited to be here.
## 
## Tony Stark: I'm sure you're excited to be here.
## 
## Jarvis: I'm not.
## 
## Tony Stark: I'm sure you're excited to be here.
## 
## Jarvis: I'm not.
## 
## Tony Stark: I'm sure you're excited to be here.
## 
## Jarvis: I'm not.
## 
## Tony Stark: I'm sure you're
</code></pre></div></div> <h2 id="reference">Reference</h2> <p>https://blogs.rstudio.com/tensorflow/posts/2019-10-23-gpt-2/</p>]]></content><author><name></name></author><category term="deeplearning"/><category term="rstats"/><summary type="html"><![CDATA[Happy holiday from GTP-2 in R GTP-2 is the state-of-the-art language model from OpenAI.]]></summary></entry><entry><title type="html">Tidytuesday Christmas Songs Wordcloud</title><link href="https://hubentu.github.io/blog/2019/TidyTuesday-christmas-songs-wordcloud/" rel="alternate" type="text/html" title="Tidytuesday Christmas Songs Wordcloud"/><published>2019-12-24T00:00:00+00:00</published><updated>2019-12-24T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2019/TidyTuesday-christmas-songs-wordcloud</id><content type="html" xml:base="https://hubentu.github.io/blog/2019/TidyTuesday-christmas-songs-wordcloud/"><![CDATA[<h1 id="tidytuesday-wordcloud-for-christmas-music-billboards">TidyTuesday: WordCloud for Christmas Music Billboards</h1> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidytext</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="n">stop_words</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">wordcloud2</span><span class="p">)</span><span class="w">

</span><span class="n">tuesdata</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tidytuesdayR</span><span class="o">::</span><span class="n">tt_load</span><span class="p">(</span><span class="s2">"2019-12-24"</span><span class="p">)</span><span class="w">
</span><span class="n">lyrics</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tuesdata</span><span class="o">$</span><span class="n">christmas_lyrics</span><span class="w">
</span></code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lyc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lyrics</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unnest_tokens</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">lyric</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">anti_join</span><span class="p">(</span><span class="n">stop_words</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">count</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Joining, by = "word"
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wordcloud2</span><span class="p">(</span><span class="n">lyc</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <iframeComp ihtml="/widgets/Christmas_song_wordcloud.html"></iframeComp>]]></content><author><name></name></author><category term="tidytuesday"/><category term="rstats"/><summary type="html"><![CDATA[TidyTuesday: WordCloud for Christmas Music Billboards]]></summary></entry><entry><title type="html">R Flowchart</title><link href="https://hubentu.github.io/blog/2019/R-flowchart/" rel="alternate" type="text/html" title="R Flowchart"/><published>2019-12-20T00:00:00+00:00</published><updated>2019-12-20T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2019/R-flowchart</id><content type="html" xml:base="https://hubentu.github.io/blog/2019/R-flowchart/"><![CDATA[<h1 id="packages-to-draw-flowchart-christmas-tree-in-r">Packages to draw flowchart (christmas tree) in R</h1> <h2 id="graphviz"><a href="https://rich-iannone.github.io/DiagrammeR/graphviz_and_mermaid.html">Graphviz</a></h2> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">DiagrammeR</span><span class="p">)</span><span class="w">
</span><span class="n">f1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">grViz</span><span class="p">(</span><span class="s2">"
digraph xmas {
  # graph satement
  graph [overlap = true, fontsize = 10]

  # node statement
  node [shape = triangle, style = filled, fillcolor = darkgreen]
  B; C; D; E; F; G
  A [shape = star, fillcolor = gold, fontsize = 5]
  H [shape = box, fillcolor = brown]

  # edge
  edge [arrowhead = dot, color = gold]
  A -&gt; B
  B -&gt; {C D}
  C -&gt; {E F}
  D -&gt; {F G}
  F -&gt; H
}
"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <iframeComp ihtml="/widgets/xmas_grViz.html"></iframeComp> <h2 id="mermaid"><a href="https://rich-iannone.github.io/DiagrammeR/graphviz_and_mermaid.html">mermaid</a></h2> <p>Could anyone tell me how to use star/triangle, change font size, define class?</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mermaid</span><span class="p">(</span><span class="s2">"
graph TB
  A((A)) --&gt; B{B}
  B{B} --&gt; |O|C{C}
  B{B} --&gt; |O|D{D}
  C{C} --&gt; |O|E{E}
  C{C} --&gt; |O|F{F}
  D{D} --&gt; |O|F{F}
  D{D} --&gt; |O|G{G}
  F{F} --- H[H]

  style A fill:gold
  style H fill:brown
  style B fill:green
  style C fill:green
  style D fill:green
  style E fill:green
  style F fill:green
  style G fill:green
"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <iframeComp ihtml="/widgets/xmas_mermaid.html"></iframeComp> <h2 id="visnetwork"><a href="https://datastorm-open.github.io/visNetwork/">visNetwork</a></h2> <p>Most R-friendly way to draw a flowchart.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">visNetwork</span><span class="p">)</span><span class="w">
</span><span class="n">nodes</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">LETTERS</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">],</span><span class="w">
                    </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">LETTERS</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">],</span><span class="w">
                    </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"gold"</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"darkgreen"</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">),</span><span class="w"> </span><span class="s2">"brown"</span><span class="p">),</span><span class="w">
                    </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"star"</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"triangle"</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">),</span><span class="w"> </span><span class="s2">"box"</span><span class="p">))</span><span class="w">
</span><span class="n">edges</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"A"</span><span class="p">,</span><span class="w"> </span><span class="s2">"B"</span><span class="p">,</span><span class="w"> </span><span class="s2">"B"</span><span class="p">,</span><span class="w"> </span><span class="s2">"C"</span><span class="p">,</span><span class="w"> </span><span class="s2">"C"</span><span class="p">,</span><span class="w"> </span><span class="s2">"D"</span><span class="p">,</span><span class="w"> </span><span class="s2">"D"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F"</span><span class="p">,</span><span class="w"> </span><span class="s2">"E"</span><span class="p">,</span><span class="w"> </span><span class="s2">"G"</span><span class="p">),</span><span class="w">
                    </span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"B"</span><span class="p">,</span><span class="w"> </span><span class="s2">"C"</span><span class="p">,</span><span class="w"> </span><span class="s2">"D"</span><span class="p">,</span><span class="w"> </span><span class="s2">"E"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F"</span><span class="p">,</span><span class="w"> </span><span class="s2">"G"</span><span class="p">,</span><span class="w"> </span><span class="s2">"H"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F"</span><span class="p">))</span><span class="w">
</span><span class="n">f3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">visNetwork</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span><span class="w"> </span><span class="n">edges</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">visLayout</span><span class="p">(</span><span class="m">7</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <iframeComp ihtml="/widgets/xmas_vis.html"></iframeComp>]]></content><author><name></name></author><category term="rstats"/><category term="flowchart"/><summary type="html"><![CDATA[Packages to draw flowchart (christmas tree) in R Graphviz]]></summary></entry><entry><title type="html">R Package Ggtext</title><link href="https://hubentu.github.io/blog/2019/R-package-ggtext/" rel="alternate" type="text/html" title="R Package Ggtext"/><published>2019-12-18T00:00:00+00:00</published><updated>2019-12-18T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2019/R-package-ggtext</id><content type="html" xml:base="https://hubentu.github.io/blog/2019/R-package-ggtext/"><![CDATA[<h1 id="add-markdownhtml-rich-text-to-ggplot2-using-ggtext">Add markdown/html rich text to ggplot2 using ggtext</h1> <h2 id="install-ggtext">Install <a href="https://github.com/clauswilke/ggtext"><code class="language-plaintext highlighter-rouge">ggtext</code></a></h2> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"clauswilke/ggtext"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <h2 id="example-to-style-title-with-both-markdown-and-html">Example to style title with both markdown and html</h2> <ul> <li>Add <strong>bold</strong> and <em>italic</em> to different words in title.</li> <li>Add different colors to different words</li> <li>Add image to title</li> </ul> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggtext</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_boxplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">as.factor</span><span class="p">(</span><span class="n">vs</span><span class="p">),</span><span class="w"> </span><span class="n">mpg</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">am</span><span class="p">)))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"**mtcars**
&lt;img src='https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Sketchup_car.png/320px-Sketchup_car.png' width='50'&gt;&lt;/img&gt;
: *mpg* _by_
&lt;i style='color:blue'&gt;vs&lt;/i&gt; and
&lt;strong style='color:red'&gt;am&lt;/strong&gt;"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_markdown</span><span class="p">())</span><span class="w">
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Warning in e1[n] &lt;- e2[n]: number of items to replace is not a multiple of
## replacement length
</code></pre></div></div> <p><img src="/assets/figure/ggtext_title-1.png" alt="plot of chunk ggtext_title"/></p> <p>More examples in <a href="https://github.com/clauswilke/ggtext"><code class="language-plaintext highlighter-rouge">ggtext</code></a></p>]]></content><author><name></name></author><category term="ggplot2"/><category term="rstats"/><summary type="html"><![CDATA[Add markdown/html rich text to ggplot2 using ggtext]]></summary></entry><entry><title type="html">Tidytuesday Adoptable Dogs Geofacet</title><link href="https://hubentu.github.io/blog/2019/Tidytuesday-adoptable-dogs-geofacet/" rel="alternate" type="text/html" title="Tidytuesday Adoptable Dogs Geofacet"/><published>2019-12-17T00:00:00+00:00</published><updated>2019-12-17T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2019/Tidytuesday-adoptable-dogs-geofacet</id><content type="html" xml:base="https://hubentu.github.io/blog/2019/Tidytuesday-adoptable-dogs-geofacet/"><![CDATA[<h1 id="tidytuesday-adoptable-dogs-with-geom_tile-and-geofacet">TidyTuesday: adoptable dogs with geom_tile and geofacet</h1> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">geofacet</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">knitr</span><span class="p">)</span><span class="w">
</span><span class="n">opts_knit</span><span class="o">$</span><span class="n">set</span><span class="p">(</span><span class="n">base.url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="p">)</span><span class="w">

</span><span class="n">dog_moves</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">readr</span><span class="o">::</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-12-17/dog_moves.csv'</span><span class="p">)</span><span class="w">
</span><span class="n">dog_ie</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dog_moves</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">inUS</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">mutate</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">replace</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w">
                              </span><span class="n">location</span><span class="o">==</span><span class="s2">"Washington DC"</span><span class="p">,</span><span class="w">
                              </span><span class="s2">"District of Columbia"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">select</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">exported</span><span class="p">,</span><span class="w"> </span><span class="n">imported</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## block per dog</span><span class="w">
</span><span class="n">tc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dog_ie</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">pull</span><span class="p">(</span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">sqrt</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">ceiling</span><span class="w">
</span><span class="n">dog_blocks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dog_ie</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">exported</span><span class="p">,</span><span class="w"> </span><span class="n">imported</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">pmap_dfr</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">exported</span><span class="p">,</span><span class="w"> </span><span class="n">imported</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">){</span><span class="w">
        </span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">tc</span><span class="o">^</span><span class="m">2</span><span class="p">),</span><span class="w">
                         </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="n">tc</span><span class="p">),</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tc</span><span class="p">),</span><span class="w">
                         </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="n">tc</span><span class="p">),</span><span class="w"> </span><span class="n">tc</span><span class="p">),</span><span class="w">
                         </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w">
                         </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
        </span><span class="n">df</span><span class="p">[</span><span class="n">seq</span><span class="p">(</span><span class="n">total</span><span class="p">),</span><span class="w"> </span><span class="s2">"z"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"total"</span><span class="w">
        </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">imported</span><span class="p">)){</span><span class="w">
            </span><span class="n">df</span><span class="p">[</span><span class="n">seq</span><span class="p">(</span><span class="n">imported</span><span class="p">),</span><span class="w"> </span><span class="s2">"z"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"imported"</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">exported</span><span class="p">)){</span><span class="w">
            </span><span class="n">df</span><span class="p">[</span><span class="n">tail</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="n">tc</span><span class="o">^</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="n">exported</span><span class="p">),</span><span class="w"> </span><span class="s2">"z"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"exported"</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="n">na.omit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
    </span><span class="p">})</span><span class="w">

</span><span class="n">dog_blocks</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_tile</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="n">z</span><span class="p">),</span><span class="w"> </span><span class="n">width</span><span class="o">=</span><span class="m">0.8</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="o">=</span><span class="m">0.8</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><img src="/assets/figure/dogs_geofacet-1.png" alt="plot of chunk dogs_geofacet"/></p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">dog_blocks</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_tile</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="n">z</span><span class="p">),</span><span class="w"> </span><span class="n">width</span><span class="o">=</span><span class="m">0.8</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="o">=</span><span class="m">0.8</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"none"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">facet_geo</span><span class="p">(</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">grid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us_state_grid2"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"code"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_minimal</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"top"</span><span class="p">,</span><span class="w">
          </span><span class="n">axis.title.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">axis.text.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">axis.ticks.x</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">axis.title.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">axis.text.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
          </span><span class="n">axis.ticks.y</span><span class="o">=</span><span class="n">element_blank</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Adoptable dogs (imported, exported and total numbers)"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><img src="/assets/figure/dogs_geofacet-2.png" alt="plot of chunk dogs_geofacet"/></p>]]></content><author><name></name></author><category term="rstats"/><category term="tidytuesday"/><summary type="html"><![CDATA[TidyTuesday: adoptable dogs with geom_tile and geofacet]]></summary></entry><entry><title type="html">Run R Python Free In Cloud</title><link href="https://hubentu.github.io/blog/2019/Run-R-Python-free-in-cloud/" rel="alternate" type="text/html" title="Run R Python Free In Cloud"/><published>2019-12-16T00:00:00+00:00</published><updated>2019-12-16T00:00:00+00:00</updated><id>https://hubentu.github.io/blog/2019/Run-R-Python-free-in-cloud</id><content type="html" xml:base="https://hubentu.github.io/blog/2019/Run-R-Python-free-in-cloud/"><![CDATA[<h1 id="how-to-run-r--python-in-the-cloud-for-free">How to run R &amp; Python in the cloud for free?</h1> <ol> <li>Microsoft Azure Notebooks</li> </ol> <p><a href="https://notebooks.azure.com/Microsoft/projects/2018-Intro-Python/html/Introduction%20to%20Python.ipynb">Introduction to Python</a></p> <p><a href="https://notebooks.azure.com/Microsoft/projects/2018-Intro-R/html/Introduction%20to%20R.ipynb">Introduction to R</a></p> <ol> <li>Google Colab</li> </ol> <p><a href="https://colab.research.google.com">Python Jupyter notebook</a></p> <p><a href="https://colab.research.google.com/github/IRkernel/IRkernel/blob/master/example-notebooks/Demo.ipynb">R kernel for Jupyter by IRkernel</a></p> <ol> <li>Kaggle Notebooks</li> </ol> <p><a href="https://www.kaggle.com/kernels/welcome">Both Python3 and R</a></p> <ol> <li>CoCalc</li> </ol> <p><a href="https://cocalc.com/doc/python.html">python Jupyter notebook</a></p> <p><a href="https://cocalc.com/doc/r-statistical-software.html">R Jupyter notebook</a></p> <ol> <li>Binder</li> </ol> <p><a href="https://mybinder.org/">Turn Jupyter notebooks in git repo to docker in cloud</a></p> <ol> <li>Rstudio cloud</li> </ol> <p><a href="https://rstudio.cloud/">Rstudio only</a></p> <ol> <li>AWS? No</li> </ol>]]></content><author><name></name></author><category term="rstats"/><category term="python"/><category term="CloudComputing"/><summary type="html"><![CDATA[How to run R &amp; Python in the cloud for free?]]></summary></entry></feed>