<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Question-Answering Engine with CrewAI and SearXNG | Qiang Hu</title> <meta name="author" content="Qiang Hu"> <meta name="description" content="Building a Cutting-edge Question-Answering Engine with CrewAI and SearXNG"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hubentu.github.io/blog/2024/QA-SearXNG/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Qiang </span>Hu</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Question-Answering Engine with CrewAI and SearXNG</h1> <p class="post-meta">March 28, 2024• Qiang; ChatGPT</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fas fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/llm"> <i class="fas fa-hashtag fa-sm"></i> LLM,</a>   <a href="/blog/tag/rag"> <i class="fas fa-hashtag fa-sm"></i> RAG,</a>   <a href="/blog/tag/search"> <i class="fas fa-hashtag fa-sm"></i> Search</a>     ·   <a href="/blog/category/nlp"> <i class="fas fa-tag fa-sm"></i> NLP</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In the rapidly evolving field of AI and information retrieval, the quest for a more intelligent, efficient, and customizable question-answering system is never-ending. The integration of CrewAI, a platform for creating AI agents with specific roles and capabilities, with SearXNG, a privacy-respecting meta search engine, opens new avenues for developing such systems. This blog post delves into how to leverage these technologies to create a customized question-answer engine capable of searching topics from a meta search engine and summarizing the findings into a cohesive article.</p> <h2 id="setting-the-stage-with-searxng">Setting the Stage with SearXNG</h2> <p>SearXNG stands as a pivotal component in this setup, serving as the meta search engine. It is free. The initial step involves launching SearXNG using Docker, ensuring it’s configured to output results in JSON format for easy parsing and integration. This step is crucial for enabling the seamless flow of information between the search engine and the AI agents responsible for processing the search queries and generating summaries.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">--rm</span> <span class="se">\</span>
             <span class="nt">-d</span> <span class="nt">-p</span> 8080:8080 <span class="se">\</span>
             <span class="nt">-v</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PWD</span><span class="k">}</span><span class="s2">/searxng:/etc/searxng"</span> <span class="se">\</span>
             <span class="nt">-e</span> <span class="s2">"BASE_URL=http://localhost:</span><span class="nv">$PORT</span><span class="s2">/"</span> <span class="se">\</span>
             <span class="nt">-e</span> <span class="s2">"INSTANCE_NAME=my-instance"</span> <span class="se">\</span>
             searxng/searxng
</code></pre></div></div> <p>Add <code class="language-plaintext highlighter-rouge">json</code> output format to <code class="language-plaintext highlighter-rouge">searxng/settings.yml</code>.</p> <h2 id="customizing-the-ai-with-crewai">Customizing the AI with CrewAI</h2> <p>CrewAI introduces a revolutionary approach to building AI systems, allowing for the creation of specialized agents with distinct roles, goals, and capabilities. In this scenario, two types of agents are crafted: the Senior Researcher and the Writer. The Senior Researcher is designed to delve deep into the chosen topics, leveraging the SearXNG search tool to uncover relevant information and groundbreaking technologies. The Writer, on the other hand, focuses on narrating compelling scientific reports or articles based on the information gathered by the researcher.</p> <p>The demo is modified from the <a href="https://docs.crewai.com/how-to/Creating-a-Crew-and-kick-it-off/" rel="external nofollow noopener" target="_blank">Getting Started</a> example from <code class="language-plaintext highlighter-rouge">crewai</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span> <span class="n">langchain_community.utilities</span> <span class="kn">import</span> <span class="n">SearxSearchWrapper</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">crewai</span> <span class="kn">import</span> <span class="n">Agent</span>
<span class="kn">from</span> <span class="n">langchain.agents</span> <span class="kn">import</span> <span class="n">Tool</span>
<span class="kn">from</span> <span class="n">langchain_google_genai</span> <span class="kn">import</span> <span class="n">GoogleGenerativeAI</span>
<span class="kn">from</span> <span class="n">crewai</span> <span class="kn">import</span> <span class="n">Crew</span><span class="p">,</span> <span class="n">Process</span>
<span class="kn">from</span> <span class="n">crewai</span> <span class="kn">import</span> <span class="n">Task</span>


<span class="n">search</span> <span class="o">=</span> <span class="nc">SearxSearchWrapper</span><span class="p">(</span><span class="n">searx_host</span><span class="o">=</span><span class="sh">"</span><span class="s">http://localhost:8080</span><span class="sh">"</span><span class="p">)</span>
<span class="c1">## res = search.results("What is the scRNASeq?", num_results = 10, engines=["google scholar", "arxiv"])                                                                                                           
</span>
<span class="n">search_tool</span> <span class="o">=</span> <span class="nc">Tool</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">search ng</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="sh">"</span><span class="s">Search the internet(search_query: </span><span class="sh">'</span><span class="s">string</span><span class="sh">'</span><span class="s">)</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">func</span><span class="o">=</span><span class="n">search</span><span class="p">.</span><span class="n">run</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="sh">""</span>
<span class="n">model</span> <span class="o">=</span> <span class="nc">GoogleGenerativeAI</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="sh">"</span><span class="s">gemini-pro</span><span class="sh">"</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">google_api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">)</span>


<span class="c1"># Creating a senior researcher agent with memory and verbose mode                                                                                                                                                  
</span><span class="n">researcher</span> <span class="o">=</span> <span class="nc">Agent</span><span class="p">(</span>
    <span class="n">role</span><span class="o">=</span><span class="sh">'</span><span class="s">Senior Researcher</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">goal</span><span class="o">=</span><span class="sh">'</span><span class="s">Uncover groundbreaking technologies in {topic}</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">memory</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">backstory</span><span class="o">=</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">Driven by curiosity, you</span><span class="sh">'</span><span class="s">re at the forefront of </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">innovation, eager to explore and share knowledge that could change </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">the world.</span><span class="sh">"</span>
    <span class="p">),</span>
    <span class="n">allow_delegation</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">search_tool</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Creating a writer agent with custom tools and delegation capability                                                                                                                                              
</span><span class="n">writer</span> <span class="o">=</span> <span class="nc">Agent</span><span class="p">(</span>
    <span class="n">role</span><span class="o">=</span><span class="sh">'</span><span class="s">Writer</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">goal</span><span class="o">=</span><span class="sh">'</span><span class="s">Narrate compelling scientific reports about {topic}</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">memory</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">backstory</span><span class="o">=</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">With a flair for simplifying complex topics, you craft </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">engaging narratives that captivate and educate, bringing new </span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">discoveries to light in an accessible manner.</span><span class="sh">"</span>
    <span class="p">),</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">search_tool</span><span class="p">],</span>
    <span class="n">allow_delegation</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">model</span>
<span class="p">)</span>
<span class="c1"># Research task                                                                                                                                                                                                    
</span><span class="n">research_task</span> <span class="o">=</span> <span class="nc">Task</span><span class="p">(</span>
    <span class="n">description</span><span class="o">=</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">Identify the next big trend in {topic}.</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Its research hot topics and potential applications</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Focus on identifying opportunities and challenges and the overall narrative.</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Your final report should clearly articulate the key points</span><span class="sh">"</span>
    <span class="p">),</span>
    <span class="n">expected_output</span><span class="o">=</span><span class="sh">'</span><span class="s">A comprehensive 3 paragraphs long report on the {topic}.</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">search_tool</span><span class="p">],</span>
    <span class="n">agent</span><span class="o">=</span><span class="n">researcher</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">model</span>
<span class="p">)</span>

<span class="c1"># Writing task with language model configuration                                                                                                                                                                   
</span><span class="n">write_task</span> <span class="o">=</span> <span class="nc">Task</span><span class="p">(</span>
    <span class="n">description</span><span class="o">=</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">Compose an insightful article on {topic}.</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Focus on the latest trends and how it</span><span class="sh">'</span><span class="s">s impacting the area.</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">This article should be easy to understand, engaging, and positive.</span><span class="sh">"</span>
        <span class="sh">"</span><span class="s">Add link references if cited.</span><span class="sh">"</span>
    <span class="p">),</span>
    <span class="n">expected_output</span><span class="o">=</span><span class="sh">'</span><span class="s">A 4 paragraph article on {topic} advancements formatted as markdown.</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">search_tool</span><span class="p">],</span>
    <span class="n">agent</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
    <span class="n">async_execution</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">output_file</span><span class="o">=</span><span class="sh">'</span><span class="s">new-blog-post.md</span><span class="sh">'</span>
<span class="p">)</span>

<span class="c1"># Forming the tech-focused crew with enhanced configurations                                                                                                                                                      
</span><span class="n">crew</span> <span class="o">=</span> <span class="nc">Crew</span><span class="p">(</span>
  <span class="n">agents</span><span class="o">=</span><span class="p">[</span><span class="n">researcher</span><span class="p">,</span> <span class="n">writer</span><span class="p">],</span>
  <span class="n">tasks</span><span class="o">=</span><span class="p">[</span><span class="n">research_task</span><span class="p">,</span> <span class="n">write_task</span><span class="p">],</span>
  <span class="n">process</span><span class="o">=</span><span class="n">Process</span><span class="p">.</span><span class="n">sequential</span>
<span class="p">)</span>

<span class="c1"># Starting the task execution process with enhanced feedback                                                                                                                                                      
</span><span class="n">result</span> <span class="o">=</span> <span class="n">crew</span><span class="p">.</span><span class="nf">kickoff</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">topic</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">scRNASeq in Cancer reseach</span><span class="sh">'</span><span class="p">})</span>
<span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre></div></div> <p><strong>scRNA-Seq: Revolutionizing Cancer Research with Novel Insights</strong></p> <p>Single-cell RNA sequencing (scRNA-Seq) has emerged as a transformative technology in cancer research, unveiling previously hidden cellular complexities within tumors. It empowers scientists to study individual cells, providing a comprehensive understanding of tumor heterogeneity. This granular approach has led to groundbreaking discoveries in cancer stem cell identification and characterization, as well as the intricate interactions within the tumor microenvironment.</p> <p><strong>Unlocking Therapeutic Potential</strong></p> <p>scRNA-Seq’s ability to identify and characterize cancer stem cells holds immense therapeutic potential. These cells, responsible for tumor initiation and progression, can now be targeted with precision. By understanding their unique gene expression profiles, researchers can develop therapies that specifically eliminate cancer stem cells, preventing tumor recurrence. Additionally, scRNA-Seq sheds light on the tumor microenvironment, the ecosystem surrounding cancer cells that influences tumor growth and metastasis. By dissecting the complex interplay between immune cells, stromal cells, and blood vessels, researchers can design immunotherapies that effectively harness the body’s own defenses against cancer.</p> <p><strong>Challenges and Future Directions</strong></p> <p>While scRNA-Seq offers unprecedented opportunities, challenges remain. The high cost of experiments and the computational complexity of data analysis hinder its widespread adoption. However, as technology advances and costs decrease, scRNA-Seq will become more accessible, democratizing its use in cancer research. The future holds exciting prospects for scRNA-Seq, with potential applications in personalized medicine, therapy selection, and the development of novel cancer treatments. Its continued evolution promises to revolutionize cancer research, leading to improved patient outcomes and a deeper understanding of this complex disease.</p> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Qiang Hu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>